import{o as h,s as m,_ as y,a as v,b as P}from"./g1qLiDm5.js";import{f as V,an as q,ao as k,r as w,ap as T,c as U,a as i,b as t,w as d,a3 as a,o as F,ar as B,d as E,aF as R,as as z,aw as C}from"./DNGEN8ck.js";const N={class:"full-page-container"},S={"data-aos":"fade-in-up",class:"full-page-card w-[450px] !px-8"},I=V({__name:"resetpassword",setup(j){const _=q(),f=k(),n=w(null),o=w(!1),r=T({password:void 0,password2:void 0}),x=h({password:m({required_error:"Password is required"}).min(6,"Password must be at least 6 characters").max(64,"Password must be less than 64 characters"),password2:m({required_error:"Password is required"}).min(6,"Password must be at least 6 characters").max(64,"Password must be less than 64 characters")});function u(c){let s=c.data;if(s){if(s.password2!==s.password){n.value?.setErrors([{message:"The two password entries are inconsistent.",path:"password2"}]);return}o.value=!0,R(_.query.token,{password:z(s.password)}).then(async e=>{if(e?.status==="success")n.value?.clear(),C("/notification/resetpassword/success",{replace:!0});else throw new Error(e.message||"Failed to reset password")}).catch(e=>{console.error(e),f.add({icon:"i-ri-error-warning-fill",title:"Failed to reset password",description:e.message,color:"red"}),n.value?.setErrors([{message:e.message,path:"password"},{message:e.message,path:"password2"}])}).finally(()=>{o.value=!1})}}return(c,s)=>{const e=P,l=v,b=B,g=y;return F(),U("div",N,[i("div",S,[s[3]||(s[3]=i("h3",{class:"text-center font-bold text-[20px]"}," Reset Password ",-1)),s[4]||(s[4]=i("p",{class:"text-center text-[16px]"}," Please enter your new password. ",-1)),t(g,{ref_key:"formRef",ref:n,state:a(r),schema:a(x),class:"mt-[24px] space-y-4",onSubmit:u},{default:d(()=>[t(l,{required:"",name:"password"},{default:d(()=>[t(e,{modelValue:a(r).password,"onUpdate:modelValue":s[0]||(s[0]=p=>a(r).password=p),type:"password",disabled:a(o),placeholder:"Password",size:"md"},null,8,["modelValue","disabled"])]),_:1}),t(l,{required:"",name:"password2"},{default:d(()=>[t(e,{modelValue:a(r).password2,"onUpdate:modelValue":s[1]||(s[1]=p=>a(r).password2=p),type:"password",disabled:a(o),placeholder:"Password again",size:"md"},null,8,["modelValue","disabled"])]),_:1}),t(l,null,{default:d(()=>[t(b,{size:"md",disabled:a(o),block:"",type:"submit",onClick:u},{default:d(()=>[...s[2]||(s[2]=[E(" Submit ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1},8,["state","schema"])])])}}});export{I as default};
