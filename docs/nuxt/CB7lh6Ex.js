import{o as h,s as w,_ as y,a as v,b as P}from"./BLE7FBme.js";import{f as V,an as q,ao as k,r as _,ap as T,c as U,a as u,b as o,w as l,a3 as a,o as F,ar as B,d as E,aF as R,as as z,aw as C}from"./cNorEL9S.js";const N={class:"full-page-container"},S={"data-aos":"fade-in-up",class:"full-page-card w-[450px] !px-8"},I=V({__name:"resetpassword",setup(j){const f=q(),x=k(),p=_(null),r=_(!1),d=T({password:void 0,password2:void 0}),b=h({password:w({required_error:"Password is required"}).min(6,"Password must be at least 6 characters").max(64,"Password must be less than 64 characters"),password2:w({required_error:"Password is required"}).min(6,"Password must be at least 6 characters").max(64,"Password must be less than 64 characters")});function c(m){var n;let s=m.data;if(s){if(s.password2!==s.password){(n=p.value)==null||n.setErrors([{message:"The two password entries are inconsistent.",path:"password2"}]);return}r.value=!0,R(f.query.token,{password:z(s.password)}).then(async e=>{var t;if((e==null?void 0:e.status)==="success")(t=p.value)==null||t.clear(),C("/notification/resetpassword/success",{replace:!0});else throw new Error(e.message||"Failed to reset password")}).catch(e=>{var t;console.error(e),x.add({icon:"i-ri-error-warning-fill",title:"Failed to reset password",description:e.message,color:"red"}),(t=p.value)==null||t.setErrors([{message:e.message,path:"password"},{message:e.message,path:"password2"}])}).finally(()=>{r.value=!1})}}return(m,s)=>{const n=P,e=v,t=B,g=y;return F(),U("div",N,[u("div",S,[s[3]||(s[3]=u("h3",{class:"text-center font-bold text-[20px]"}," Reset Password ",-1)),s[4]||(s[4]=u("p",{class:"text-center text-[16px]"}," Please enter your new password. ",-1)),o(g,{ref_key:"formRef",ref:p,state:a(d),schema:a(b),class:"mt-[24px] space-y-4",onSubmit:c},{default:l(()=>[o(e,{required:"",name:"password"},{default:l(()=>[o(n,{modelValue:a(d).password,"onUpdate:modelValue":s[0]||(s[0]=i=>a(d).password=i),type:"password",disabled:a(r),placeholder:"Password",size:"md"},null,8,["modelValue","disabled"])]),_:1}),o(e,{required:"",name:"password2"},{default:l(()=>[o(n,{modelValue:a(d).password2,"onUpdate:modelValue":s[1]||(s[1]=i=>a(d).password2=i),type:"password",disabled:a(r),placeholder:"Password again",size:"md"},null,8,["modelValue","disabled"])]),_:1}),o(e,null,{default:l(()=>[o(t,{size:"md",disabled:a(r),block:"",type:"submit",onClick:c},{default:l(()=>s[2]||(s[2]=[E(" Submit ")])),_:1},8,["disabled"])]),_:1})]),_:1},8,["state","schema"])])])}}});export{I as default};
